<!DOCTYPE html><html dir="ltr" lang="en"><head>
<meta content="157101835696-ooapojlodmuabs2do2vuhhnf90bccmoi.apps.googleusercontent.com" name="google-signin-client-id"/>
<meta content="profile email" name="google-signin-scope"/>
<meta content="TensorFlow" property="og:site_name"/>
<meta content="website" property="og:type"/>
<meta content="#ff6f00" name="theme-color"/>
<meta charset="utf-8"/>
<meta content="IE=Edge" http-equiv="X-UA-Compatible"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<link crossorigin="use-credentials" href="_pwa/tensorflow/manifest.json" rel="manifest"/>
<link crossorigin="" href="/www.gstatic.com" rel="preconnect"/>
<link crossorigin="" href="/fonts.gstatic.com" rel="preconnect"/>
<link crossorigin="" href="/fonts.googleapis.com" rel="preconnect"/>
<link href="../../../../main.css" rel="stylesheet"/>

<noscript>

</noscript>
<link href="https://www.gstatic.com/devrel-devsite/prod/v3e2dbdc40e7394635e5230ecc02cb28039ea55a5d72db9939d2fb9fc9e16d0ff/tensorflow/images/favicon.png" rel="shortcut icon"/>
<link href="https://www.gstatic.com/devrel-devsite/prod/v3e2dbdc40e7394635e5230ecc02cb28039ea55a5d72db9939d2fb9fc9e16d0ff/tensorflow/images/apple-touch-icon-180x180.png" rel="apple-touch-icon"/><link href="https://www.tensorflow.org/api_docs/python/tf/distribute/OneDeviceStrategy" rel="canonical"/><link href="https://www.tensorflow.org/s/opensearch.xml" rel="search" title="TensorFlow" type="application/opensearchdescription+xml"/>
<title>tf.distribute.OneDeviceStrategy &nbsp;|&nbsp; TensorFlow Core v2.1.0</title>
<meta content="tf.distribute.OneDeviceStrategy &nbsp;|&nbsp; TensorFlow Core v2.1.0" property="og:title"/>
<meta content="https://www.tensorflow.org/api_docs/python/tf/distribute/OneDeviceStrategy" property="og:url"/>
<meta content="en" property="og:locale"/>

</head>
<body class="" layout="docs" pending="" theme="tensorflow-theme" type="reference">
<devsite-progress id="app-progress" type="indeterminate"></devsite-progress>
<section class="devsite-wrapper"> <devsite-book-nav scrollbars="">

</devsite-book-nav>
<section id="gc-wrapper">
<main class="devsite-main-content" has-book-nav="" has-toc="" role="main">
<devsite-toc class="devsite-nav"></devsite-toc>
<devsite-content>
<article class="devsite-article">
<article class="devsite-article-inner"><style>
        /* Styles inlined from /site-assets/css/style.css */
/* override theme */
table img {
  max-width: 100%;
}

/* override var element to differentiate color from comment */
var, var code, var span, .prettyprint var span {
  color: #039be5;
}

/* .devsite-terminal virtualenv prompt */
.tfo-terminal-venv::before {
  content: "(venv) $ " !important;
}

/* .devsite-terminal root prompt */
.tfo-terminal-root::before {
  content: "# " !important;
}

/* .devsite-terminal Windows prompt */
.tfo-terminal-windows::before {
  content: "C:\\> " !important;
}

/* .devsite-terminal Windows prompt w/ virtualenv */
.tfo-terminal-windows-venv::before {
  content: "(venv) C:\\> " !important;
}

.tfo-diff-green-one-level + * {
  background: rgba(175, 245, 162, .6)  !important;
}

.tfo-diff-green + * > * {
  background: rgba(175, 245, 162, .6)  !important;
}

.tfo-diff-green-list + ul > li:first-of-type {
  background: rgba(175, 245, 162, .6)  !important;
}

.tfo-diff-red-one-level + * {
  background: rgba(255, 230, 230, .6)  !important;
  text-decoration: line-through  !important;
}

.tfo-diff-red + * > * {
  background: rgba(255, 230, 230, .6)  !important;
  text-decoration: line-through  !important;
}

.tfo-diff-red-list + ul > li:first-of-type {
  background: rgba(255, 230, 230, .6)  !important;
  text-decoration: line-through  !important;
}

devsite-code .tfo-notebook-code-cell-output {
  max-height: 300px;
  overflow: auto;
  background: rgba(255, 247, 237, 1);  /* orange bg to distinguish from input code cells */
}

devsite-code .tfo-notebook-code-cell-output + .devsite-code-buttons-container button {
  background: rgba(255, 247, 237, .7);  /* orange bg to distinguish from input code cells */
}

devsite-code[dark-code] .tfo-notebook-code-cell-output {
  background: rgba(64, 78, 103, 1);  /* medium slate */
}

devsite-code[dark-code] .tfo-notebook-code-cell-output + .devsite-code-buttons-container button {
  background: rgba(64, 78, 103, .7);  /* medium slate */
}

/* override default table styles for notebook buttons */
.devsite-table-wrapper .tfo-notebook-buttons {
  display: inline-block;
  margin-left: 3px;
  width: auto;
}

.tfo-notebook-buttons td {
  padding-left: 0;
  padding-right: 20px;
}

.tfo-notebook-buttons a,
.tfo-notebook-buttons :link,
.tfo-notebook-buttons :visited {
  border-radius: 8px;
  box-shadow: 0 1px 2px 0 rgba(60, 64, 67, .3), 0 1px 3px 1px rgba(60, 64, 67, .15);
  color: #202124;
  padding: 12px 24px;
  transition: box-shadow 0.2s;
}

.tfo-notebook-buttons a:hover,
.tfo-notebook-buttons a:focus {
  box-shadow: 0 1px 2px 0 rgba(60, 64, 67, .3), 0 2px 6px 2px rgba(60, 64, 67, .15);
}

.tfo-notebook-buttons tr {
  background: 0;
  border: 0;
}

/* on rendered notebook page,
   remove link to webpage since we're already here */
.tfo-notebook-buttons:not(.tfo-api) td:first-child {
  display: none;
}

.tfo-notebook-buttons td > a {
  -webkit-box-align: center;
  -ms-flex-align: center;
  align-items: center;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
}

.tfo-notebook-buttons td > a > img {
  margin-right: 8px;
}

/* landing pages */

.tfo-landing-row-item-inset-white {
  background-color: #fff;
  padding: 32px;
}

.tfo-landing-row-item-inset-white ol,
.tfo-landing-row-item-inset-white ul {
  padding-left: 20px;
}

/* colab callout button */
.colab-callout-row devsite-code {
  border-radius: 8px 8px 0 0;
  box-shadow: none;
}

.colab-callout-footer {
  background: #e3e4e7;
  border-radius: 0 0 8px 8px;
  color: #37474f;
  padding: 20px;
}

.colab-callout-row devsite-code[dark-code] + .colab-callout-footer {
  background: #3f4f66;
}


.colab-callout-footer > .button {
  margin-top: 4px;
  color: #ff5c00;
}

.colab-callout-footer > a > span {
  padding-top: 10px;
  vertical-align: middle;
  color: #37474f;
  padding-left: 10px;
  padding-right: 10px;
  font-size: 14px;
}

.colab-callout-row devsite-code[dark-code] + .colab-callout-footer > a > span {
  color: #fff;
}

a.colab-button {
  background: rgba(255, 255, 255, .75);
  border: solid 1px rgba(0, 0, 0, .08);
  border-bottom-color: rgba(0, 0, 0, .15);
  border-radius: 4px;
  color: #aaa;
  display: inline-block;
  font-size: 11px !important;
  font-weight: 300;
  line-height: 16px;
  padding: 4px 8px;
  text-decoration: none;
  text-transform: uppercase;
}

a.colab-button:hover {
  background: white;
  border-color: rgba(0, 0, 0, .2);
  color: #666;
}

a.colab-button span {
  background: url(/images/colab_logo_button.svg) no-repeat 1px 1px / 20px;
  border-radius: 4px;
  display: inline-block;
  padding-left: 24px;
  text-decoration: none;
}

@media screen and (max-width: 600px) {
  .tfo-notebook-buttons td {
    display: block;
  }
}

/* guide and tutorials landing page cards and sections */

.tfo-landing-page-card {
  padding: 16px;
  box-shadow: 0 0 36px rgba(0,0,0,0.1);
  border-radius: 10px;
}

/* Page section headings */
.tfo-landing-page-heading h2, h2.tfo-landing-page-heading {
  font-family: "Google Sans", sans-serif;
  color: #425066;
  font-size: 30px;
  font-weight: 700;
  line-height: 40px;
}

/* Item title headings */
.tfo-landing-page-heading h3, h3.tfo-landing-page-heading,
.tfo-landing-page-card h3, h3.tfo-landing-page-card {
  font-family: "Google Sans", sans-serif;
  color: #425066;
  font-size: 20px;
  font-weight: 500;
  line-height: 26px;
}

/* List of tutorials notebooks for subsites */
.tfo-landing-page-resources-ul {
  padding-left: 15px
}

.tfo-landing-page-resources-ul > li {
  margin: 6px 0;
}

/* Temporary fix to hide product description in header on landing pages */
devsite-header .devsite-product-description {
  display: none;
}

        </style> <div class="devsite-banner devsite-banner-announcement">
<div class="devsite-banner-message">
<div class="devsite-banner-message-text">
            Missed TensorFlow Dev Summit? Check out the video playlist. <a class="button button-primary button-tfo-announcement" href="https://goo.gle/TFDS20AllSessions">Watch recordings</a>
</div>
</div>
</div>
<div class="devsite-article-meta">
<ul class="devsite-breadcrumb-list">
<li class="devsite-breadcrumb-item">
<a class="devsite-breadcrumb-link gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Breadcrumbs" data-value="1" href="">
            TensorFlow
      
  </a>
</li>
<li class="devsite-breadcrumb-item">
<div aria-hidden="true" class="devsite-breadcrumb-guillemet material-icons"></div>
<a class="devsite-breadcrumb-link gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Breadcrumbs" data-value="2" href="api">
            API
      
  </a>
</li>
<li class="devsite-breadcrumb-item">
<div aria-hidden="true" class="devsite-breadcrumb-guillemet material-icons"></div>
<a class="devsite-breadcrumb-link gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Breadcrumbs" data-value="3" href="api_docs">
            TensorFlow Core v2.1.0
      
  </a>
</li>
<li class="devsite-breadcrumb-item">
<div aria-hidden="true" class="devsite-breadcrumb-guillemet material-icons"></div>
<a class="devsite-breadcrumb-link gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Breadcrumbs" data-value="4" href="api_docs/python/tf">
            Python
      
  </a>
</li>
</ul>
<devsite-page-rating hover-rating-star="0" position="header" selected-rating="0">
</devsite-page-rating>
</div>
<a class="dashingAutolink" name="autolink-1265"></a><a class="dashAnchor" name="//apple_ref/cpp/Function/tf.distribute.OneDeviceStrategy"></a><h1 class="dash-function">tf.distribute.OneDeviceStrategy</h1>
<devsite-toc class="devsite-nav" devsite-toc-embedded="">
</devsite-toc>
<div class="devsite-article-body clearfix">
<p></p>
<!-- DO NOT EDIT! Automatically generated file. -->
<div itemscope="" itemtype="http://developers.google.com/ReferenceObject">
<meta content="tf.distribute.OneDeviceStrategy" itemprop="name"/>
<meta content="Stable" itemprop="path"/>
<meta content="__init__" itemprop="property"/>
<meta content="experimental_distribute_dataset" itemprop="property"/>
<meta content="experimental_distribute_datasets_from_function" itemprop="property"/>
<meta content="experimental_local_results" itemprop="property"/>
<meta content="experimental_make_numpy_dataset" itemprop="property"/>
<meta content="experimental_run_v2" itemprop="property"/>
<meta content="reduce" itemprop="property"/>
<meta content="scope" itemprop="property"/>
</div>
<p><devsite-nav-buttons name="version" param="reset">
<button default="" value="stable">See Stable</button>
<button value="nightly">See Nightly</button>
</devsite-nav-buttons></p>
<!-- Stable -->
<table align="left" class="tfo-notebook-buttons tfo-api">
<tbody><tr><td>
<a href="versions/r1.15/api_docs/python/tf/distribute/OneDeviceStrategy" target="_blank">
<img src="https://www.tensorflow.org/images/tf_logo_32px.png"/>
  TensorFlow 1 version</a>
</td>
<td>
<a href="https://github.com/tensorflow/tensorflow/blob/v2.1.0/tensorflow/python/distribute/one_device_strategy.py#L41-L229" target="_blank">
<img src="https://www.tensorflow.org/images/GitHub-Mark-32px.png"/>
    View source on GitHub
  </a>
</td></tr></tbody></table>
<p>A distribution strategy for running on a single device.</p>
<p>Inherits From: <a href="https://www.tensorflow.org/api_docs/python/tf/distribute/Strategy"><code dir="ltr" translate="no">Strategy</code></a></p>
<pre class="prettyprint lang-python" dir="ltr" translate="no"><code dir="ltr" translate="no">tf.distribute.OneDeviceStrategy(
    device
)
</code></pre>
<h3>Used in the notebooks</h3>
<table class="vertical-rules">
<thead>
<tr>
<th>Used in the tutorials</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<ul>
<li><a href="https://www.tensorflow.org/tutorials/distribute/save_and_load">Save and load a model using a distribution strategy</a></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Using this strategy will place any variables created in its scope on the
specified device. Input distributed through this strategy will be
prefetched to the specified device. Moreover, any functions called via
<code dir="ltr" translate="no">strategy.experimental_run_v2</code> will also be placed on the specified device
as well.</p>
<p>Typical usage of this strategy could be testing your code with the
tf.distribute.Strategy API before switching to other strategies which
actually distribute to multiple devices/machines.</p>
<h4 id="for_example_2">For example:</h4>
<pre class="prettyprint" dir="ltr" translate="no"><code dir="ltr" translate="no">strategy = tf.distribute.OneDeviceStrategy(device=&#34;/gpu:0&#34;)

with strategy.scope():
  v = tf.Variable(1.0)
  print(v.device)  # /job:localhost/replica:0/task:0/device:GPU:0

def step_fn(x):
  return x * 2

result = 0
for i in range(10):
  result += strategy.experimental_run_v2(step_fn, args=(i,))
print(result)  # 90
</code></pre>
<h4 id="args_9">Args:</h4>
<ul>
<li><b><code dir="ltr" translate="no">device</code></b>: Device string identifier for the device on which the variables
should be placed. See class docs for more details on how the device is
used. Examples: &#34;/cpu:0&#34;, &#34;/gpu:0&#34;, &#34;/device:CPU:0&#34;, &#34;/device:GPU:0&#34;</li>
</ul>
<h4 id="attributes_2">Attributes:</h4>
<ul>
<li><b><code dir="ltr" translate="no">extended</code></b>:   <a href="https://www.tensorflow.org/api_docs/python/tf/distribute/StrategyExtended"><code dir="ltr" translate="no">tf.distribute.StrategyExtended</code></a> with additional methods.</li>
<li><b><code dir="ltr" translate="no">num_replicas_in_sync</code></b>:   Returns number of replicas over which gradients are aggregated.</li>
</ul>
<h2 id="methods_2">Methods</h2>
<h3 id="experimental_distribute_dataset"><code dir="ltr" translate="no">experimental_distribute_dataset</code></h3>
<p><a href="https://github.com/tensorflow/tensorflow/blob/v2.1.0/tensorflow/python/distribute/one_device_strategy.py#L82-L108" target="_blank">View source</a></p>
<pre class="prettyprint lang-python" dir="ltr" translate="no"><code dir="ltr" translate="no">experimental_distribute_dataset(
    dataset
)
</code></pre>
<p>Distributes a tf.data.Dataset instance provided via dataset.</p>
<p>In this case, there is only one device, so this is only a thin wrapper
around the input dataset. It will, however, prefetch the input data to the
specified device. The returned distributed dataset can be iterated over
similar to how regular datasets can.</p>
<p>NOTE: Currently, the user cannot add any more transformations to a
distributed dataset.</p>
<h4 id="example_5">Example:</h4>
<pre class="prettyprint" dir="ltr" translate="no"><code dir="ltr" translate="no">strategy = tf.distribute.OneDeviceStrategy()
dataset = tf.data.Dataset.range(10).batch(2)
dist_dataset = strategy.experimental_distribute_dataset(dataset)
for x in dist_dataset:
  print(x)  # [0, 1], [2, 3],...
</code></pre>
<p>Args:
  dataset: <a href="https://www.tensorflow.org/api_docs/python/tf/data/Dataset"><code dir="ltr" translate="no">tf.data.Dataset</code></a> to be prefetched to device.</p>
<h4 id="returns_12">Returns:</h4>
<p>A &#34;distributed <code dir="ltr" translate="no">Dataset</code>&#34; that the caller can iterate over.</p>
<h3 id="experimental_distribute_datasets_from_function"><code dir="ltr" translate="no">experimental_distribute_datasets_from_function</code></h3>
<p><a href="https://github.com/tensorflow/tensorflow/blob/v2.1.0/tensorflow/python/distribute/one_device_strategy.py#L110-L148" target="_blank">View source</a></p>
<pre class="prettyprint lang-python" dir="ltr" translate="no"><code dir="ltr" translate="no">experimental_distribute_datasets_from_function(
    dataset_fn
)
</code></pre>
<p>Distributes <a href="https://www.tensorflow.org/api_docs/python/tf/data/Dataset"><code dir="ltr" translate="no">tf.data.Dataset</code></a> instances created by calls to <code dir="ltr" translate="no">dataset_fn</code>.</p>
<p><code dir="ltr" translate="no">dataset_fn</code> will be called once for each worker in the strategy. In this
case, we only have one worker and one device so <code dir="ltr" translate="no">dataset_fn</code> is called
once.</p>
<p>The <code dir="ltr" translate="no">dataset_fn</code> should take an <a href="https://www.tensorflow.org/api_docs/python/tf/distribute/InputContext"><code dir="ltr" translate="no">tf.distribute.InputContext</code></a> instance where
information about batching and input replication can be accessed:</p>
<pre class="prettyprint" dir="ltr" translate="no"><code dir="ltr" translate="no">def dataset_fn(input_context):
  batch_size = input_context.get_per_replica_batch_size(global_batch_size)
  d = tf.data.Dataset.from_tensors([[1.]]).repeat().batch(batch_size)
  return d.shard(
      input_context.num_input_pipelines, input_context.input_pipeline_id)

inputs = strategy.experimental_distribute_datasets_from_function(dataset_fn)

for batch in inputs:
  replica_results = strategy.experimental_run_v2(replica_fn, args=(batch,))
</code></pre>
<p>IMPORTANT: The <a href="https://www.tensorflow.org/api_docs/python/tf/data/Dataset"><code dir="ltr" translate="no">tf.data.Dataset</code></a> returned by <code dir="ltr" translate="no">dataset_fn</code> should have a
per-replica batch size, unlike <code dir="ltr" translate="no">experimental_distribute_dataset</code>, which uses
the global batch size.  This may be computed using
<code dir="ltr" translate="no">input_context.get_per_replica_batch_size</code>.</p>
<h4 id="args_10">Args:</h4>
<ul>
<li><b><code dir="ltr" translate="no">dataset_fn</code></b>: A function taking a <a href="https://www.tensorflow.org/api_docs/python/tf/distribute/InputContext"><code dir="ltr" translate="no">tf.distribute.InputContext</code></a> instance and
returning a <a href="https://www.tensorflow.org/api_docs/python/tf/data/Dataset"><code dir="ltr" translate="no">tf.data.Dataset</code></a>.</li>
</ul>
<h4 id="returns_13">Returns:</h4>
<p>A &#34;distributed <code dir="ltr" translate="no">Dataset</code>&#34;, which the caller can iterate over like regular
datasets.</p>
<h3 id="experimental_local_results"><code dir="ltr" translate="no">experimental_local_results</code></h3>
<p><a href="https://github.com/tensorflow/tensorflow/blob/v2.1.0/tensorflow/python/distribute/one_device_strategy.py#L150-L164" target="_blank">View source</a></p>
<pre class="prettyprint lang-python" dir="ltr" translate="no"><code dir="ltr" translate="no">experimental_local_results(
    value
)
</code></pre>
<p>Returns the list of all local per-replica values contained in <code dir="ltr" translate="no">value</code>.</p>
<p>In <code dir="ltr" translate="no">OneDeviceStrategy</code>, the <code dir="ltr" translate="no">value</code> is always expected to be a single
value, so the result is just the value in a tuple.</p>
<h4 id="args_11">Args:</h4>
<ul>
<li><b><code dir="ltr" translate="no">value</code></b>: A value returned by <code dir="ltr" translate="no">experimental_run()</code>, <code dir="ltr" translate="no">experimental_run_v2()</code>,
<code dir="ltr" translate="no">extended.call_for_each_replica()</code>, or a variable created in <code dir="ltr" translate="no">scope</code>.</li>
</ul>
<h4 id="returns_14">Returns:</h4>
<p>A tuple of values contained in <code dir="ltr" translate="no">value</code>. If <code dir="ltr" translate="no">value</code> represents a single
value, this returns <code dir="ltr" translate="no">(value,).</code></p>
<h3 id="experimental_make_numpy_dataset"><code dir="ltr" translate="no">experimental_make_numpy_dataset</code></h3>
<p><a href="https://github.com/tensorflow/tensorflow/blob/v2.1.0/tensorflow/python/distribute/distribute_lib.py#L578-L604" target="_blank">View source</a></p>
<pre class="prettyprint lang-python" dir="ltr" translate="no"><code dir="ltr" translate="no">experimental_make_numpy_dataset(
    numpy_input
)
</code></pre>
<p>Makes a <a href="https://www.tensorflow.org/api_docs/python/tf/data/Dataset"><code dir="ltr" translate="no">tf.data.Dataset</code></a> for input provided via a numpy array.</p>
<p>This avoids adding <code dir="ltr" translate="no">numpy_input</code> as a large constant in the graph,
and copies the data to the machine or machines that will be processing
the input.</p>
<p>Note that you will likely need to use <code dir="ltr" translate="no">experimental_distribute_dataset</code>
with the returned dataset to further distribute it with the strategy.</p>
<h4 id="example_6">Example:</h4>
<pre class="prettyprint" dir="ltr" translate="no"><code dir="ltr" translate="no">numpy_input = np.ones([10], dtype=np.float32)
dataset = strategy.experimental_make_numpy_dataset(numpy_input)
dist_dataset = strategy.experimental_distribute_dataset(dataset)
</code></pre>
<h4 id="args_12">Args:</h4>
<ul>
<li><b><code dir="ltr" translate="no">numpy_input</code></b>: A nest of NumPy input arrays that will be converted into a
dataset. Note that lists of Numpy arrays are stacked, as that is normal
<a href="https://www.tensorflow.org/api_docs/python/tf/data/Dataset"><code dir="ltr" translate="no">tf.data.Dataset</code></a> behavior.</li>
</ul>
<h4 id="returns_15">Returns:</h4>
<p>A <a href="https://www.tensorflow.org/api_docs/python/tf/data/Dataset"><code dir="ltr" translate="no">tf.data.Dataset</code></a> representing <code dir="ltr" translate="no">numpy_input</code>.</p>
<h3 id="experimental_run_v2"><code dir="ltr" translate="no">experimental_run_v2</code></h3>
<p><a href="https://github.com/tensorflow/tensorflow/blob/v2.1.0/tensorflow/python/distribute/one_device_strategy.py#L166-L180" target="_blank">View source</a></p>
<pre class="prettyprint lang-python" dir="ltr" translate="no"><code dir="ltr" translate="no">experimental_run_v2(
    fn, args=(), kwargs=None
)
</code></pre>
<p>Run <code dir="ltr" translate="no">fn</code> on each replica, with the given arguments.</p>
<p>In <code dir="ltr" translate="no">OneDeviceStrategy</code>, <code dir="ltr" translate="no">fn</code> is simply called within a device scope for the
given device, with the provided arguments.</p>
<h4 id="args_13">Args:</h4>
<ul>
<li><b><code dir="ltr" translate="no">fn</code></b>: The function to run. The output must be a <a href="https://www.tensorflow.org/api_docs/python/tf/nest"><code dir="ltr" translate="no">tf.nest</code></a> of <code dir="ltr" translate="no">Tensor</code>s.</li>
<li><b><code dir="ltr" translate="no">args</code></b>: (Optional) Positional arguments to <code dir="ltr" translate="no">fn</code>.</li>
<li><b><code dir="ltr" translate="no">kwargs</code></b>: (Optional) Keyword arguments to <code dir="ltr" translate="no">fn</code>.</li>
</ul>
<h4 id="returns_16">Returns:</h4>
<p>Return value from running <code dir="ltr" translate="no">fn</code>.</p>
<h3 id="reduce"><code dir="ltr" translate="no">reduce</code></h3>
<p><a href="https://github.com/tensorflow/tensorflow/blob/v2.1.0/tensorflow/python/distribute/one_device_strategy.py#L182-L213" target="_blank">View source</a></p>
<pre class="prettyprint lang-python" dir="ltr" translate="no"><code dir="ltr" translate="no">reduce(
    reduce_op, value, axis
)
</code></pre>
<p>Reduce <code dir="ltr" translate="no">value</code> across replicas.</p>
<p>In <code dir="ltr" translate="no">OneDeviceStrategy</code>, there is only one replica, so if axis=None, value
is simply returned. If axis is specified as something other than None,
such as axis=0, value is reduced along that axis and returned.</p>
<h4 id="example_7">Example:</h4>
<pre class="prettyprint" dir="ltr" translate="no"><code dir="ltr" translate="no">t = tf.range(10)

result = strategy.reduce(tf.distribute.ReduceOp.SUM, t, axis=None).numpy()
# result: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]

result = strategy.reduce(tf.distribute.ReduceOp.SUM, t, axis=0).numpy()
# result: 45
</code></pre>
<h4 id="args_14">Args:</h4>
<ul>
<li><b><code dir="ltr" translate="no">reduce_op</code></b>: A <a href="https://www.tensorflow.org/api_docs/python/tf/distribute/ReduceOp"><code dir="ltr" translate="no">tf.distribute.ReduceOp</code></a> value specifying how values should
be combined.</li>
<li><b><code dir="ltr" translate="no">value</code></b>: A &#34;per replica&#34; value, e.g. returned by <code dir="ltr" translate="no">experimental_run_v2</code> to
be combined into a single tensor.</li>
<li><b><code dir="ltr" translate="no">axis</code></b>: Specifies the dimension to reduce along within each
replica&#39;s tensor. Should typically be set to the batch dimension, or
<code dir="ltr" translate="no">None</code> to only reduce across replicas (e.g. if the tensor has no batch
dimension).</li>
</ul>
<h4 id="returns_17">Returns:</h4>
<p>A <code dir="ltr" translate="no">Tensor</code>.</p>
<h3 id="scope"><code dir="ltr" translate="no">scope</code></h3>
<p><a href="https://github.com/tensorflow/tensorflow/blob/v2.1.0/tensorflow/python/distribute/one_device_strategy.py#L215-L229" target="_blank">View source</a></p>
<pre class="prettyprint lang-python" dir="ltr" translate="no"><code dir="ltr" translate="no">scope()
</code></pre>
<p>Returns a context manager selecting this Strategy as current.</p>
<p>Inside a <code dir="ltr" translate="no">with strategy.scope():</code> code block, this thread
will use a variable creator set by <code dir="ltr" translate="no">strategy</code>, and will
enter its &#34;cross-replica context&#34;.</p>
<p>In <code dir="ltr" translate="no">OneDeviceStrategy</code>, all variables created inside <code dir="ltr" translate="no">strategy.scope()</code>
will be on <code dir="ltr" translate="no">device</code> specified at strategy construction time.
See example in the docs for this class.</p>
<h4 id="returns_18">Returns:</h4>
<p>A context manager to use for creating variables with this strategy.</p>
</div>
<devsite-page-rating hover-rating-star="0" position="footer" selected-rating="0">
</devsite-page-rating>
</article>
</article>

</devsite-content>
</main>
<devsite-footer-promos class="devsite-footer">
</devsite-footer-promos>
<devsite-footer-linkboxes class="devsite-footer">

</devsite-footer-linkboxes>
<devsite-footer-utility class="devsite-footer">
<div class="devsite-footer-utility nocontent">

</div>
</devsite-footer-utility>
</section></section>
<devsite-sitemask></devsite-sitemask>
<devsite-snackbar></devsite-snackbar> <devsite-tooltip></devsite-tooltip>
<devsite-heading-link></devsite-heading-link>
<devsite-analytics>


</devsite-analytics>
 
</body></html>